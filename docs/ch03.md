# JPA로 데이터베이스 다루기

iBatis로 SQL 매핑하는 건 때에따라 중요하다! 복잡한 쿼리가 필요하다 싶으면 이걸로 처리해야할 수 있다.

저자는, SQL 쿼리에 골을 싸매는 식으로 개발하다보면 객체지향적 접근을 놓치고 테이블 모델링에 집중됨을 비판한다.

그러면서 동시에 자바 표준 ORM인 JPA를 이야기한다

- JPA는 설계를 위한 스펙이고, JPA 구현체 중 가장 유명한건 Hibernate이다.
- 복잡한 Raw query가 필요하다면 JPQL과 QueryDSL를 적절히 사용해서 풀어낼 수 있다.
- Spring Data JPA 라는 영속성 접근 인터페이스로 데이터베이스에 접근할 수 있다.
  - MongoDB용, Redis용 기타 등등 다른 Spring Data 모듈 또한 존재한다.

이어서 JPA 기반의 장점을 지속적으로 소개한다.

- 객체기반으로 코드를 설계하고 매핑하면, 반복되는 코드를 줄일 수 있다.
    - 매핑된 코드는 iBatis의 쌩쿼리 반복을 최소화할 수 있다.
    - (1번 문제) RDBMS 의 데이터베이스 모델링 패러다임과, 객체지향적 프로그래밍의 간극을 최소화할 수 있다

## 나의 생각

그런데 잘 생각해보면, 복잡한 비즈니스 로직을 치밀하게 짜는 것 자체부터가 굉장히 힘든 접근이다.
이럴 때는 객체지향적 접근을 통해 객체간 역할, 책임을 나누고 이걸 어디에 영속화할지 고민하는게 백번 옳다고 생각한다.

혹자는 말한다.

> '단순한 도메인에서는 그래도 될까?' 

> '간단한 도메인에선 굳이 그럴 필요가 없다. 프로덕트가 빨리 나오는 것에 집중해야한다'
 
동의한다. 프로그래머는 프로그램을 만드는 사람이니까.
하지만, 확장가능한 디자인을 공부하고 이를 도입할 준비를 해보고 써보는 시도자체는 필요하다.

그런데 또 복잡한 쿼리(테이블이 열몇개씩 동시에 조인되는?!)에도 적합하지 않다.

프로그래밍에는 정답이 없다지만, 오답(잘못된 선택으로 인해 야근하는 등)을 걸러내기 위해 학습해두자

### 1번 문제

이거로 장점을 제대로 얻기 위해선 객체지향 자체를 제대로 이해해야하고 RDBMS 설계 자체도 빠삭해야한다.

"도메인" 이라는 말의 무게가 무겁다. 왕관과 같아서, 올바르게 써야 위엄이 선다.

많은 책을 읽고 판단하자.

# 다시 책 내용으로

게시판을 만들어봅시다.

주요기능

- 게시판
  - 게시글 조회
  - 게시글 등록 
  - 게시글 수정
  - 게시글 삭제
- OAuth 2로 로그인
  - 내 글 쓰기
  - 내 글 권한 관리

## 도메인 담기
